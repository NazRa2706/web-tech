<html>
  <head>
    <title>ShopZone | Online Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="E Commerce.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css">
  </head>

  <body>
    
    <header class="main-header">
        <a href="#" class="header-logo">ShopZone</a>
        <div class="search-bar-container">
            <input type="text" id="searchInput" placeholder="Search for products, brands and more..." class="search-input">
            <button id="searchButton" class="search-btn"><i class="fas fa-search"></i></button>

            <div id="searchSuggestions" class="absolute top-full left-0 right-0 bg-white rounded-b-lg shadow-lg z-10 max-h-60 overflow-y-auto hidden border border-gray-200"></div>
        </div>
        <nav class="header-nav">
            <button id="userAccountBtn" class="nav-link">
                <i class="fas fa-user"></i> <span id="userNameDisplay">Login</span>
            </button>
            <button id="ordersLink" class="nav-link">
                <i class="fas fa-box-open"></i> Orders
            </button>
            <button id="cartButton" class="relative nav-link focus:outline-none">
                <i class="fas fa-shopping-cart"></i> Cart
                <span id="cartCount" class="cart-count hidden">0</span>
            </button>
            <button id="loginBtn" class="nav-link" onclick="window.location.href='/login'">
                <i class="fas fa-user"></i> Login
            </button>
            <button id="logoutButton" class="nav-link hidden"><i class="fas fa-sign-out-alt"></i> Logout</button>
            <button onclick="window.location.href='/admin.html'" class="nav-link">Admin</button>

        </nav>
    </header>

    <section class="marquee-section">
        <h1>Shop Easy</h1>
    </section>
            
    <div class="swiper swiper-container container mx-auto">
        <div class="swiper-wrapper">
            <div class="swiper-slide"><img src="img/Infinix.png"></div>
            <div class="swiper-slide"><img src="img/flight.png"></div>
            <div class="swiper-slide"><img src="img/Vivo.png" ></div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
    </div>
            
    
    <main class="container mx-auto my-6 p-4 flex flex-col flex-grow">
        <section class="product-section" id="productSection">
            <h1>Suggested for You</h1>
            <hr>
            <div id="productGrid" class="product-grid">
            
            </div>
            <div id="noProductsMessage" class="no-products-message hidden">No products found matching your criteria.</div>
        </section>

    
        <section id="paymentSection" class="payment-section">
            <h2 class="text-center text-3xl font-bold mb-6 text-gray-800">Complete Your Payment</h2>
            
            <div class="payment-method-selector mb-6">
                <p class="font-semibold mb-3">Select Payment Method:</p>
                <div class="flex gap-4 flex-wrap">
                    <label class="payment-method-option">
                        <input type="radio" name="paymentMethod" value="card" checked>
                        <span class="payment-method-label">
                            <i class="fas fa-credit-card"></i> Credit/Debit Card
                        </span>
                    </label>
                    <label class="payment-method-option">
                        <input type="radio" name="paymentMethod" value="upi">
                        <span class="payment-method-label">
                            <i class="fas fa-mobile-alt"></i> UPI Payment
                        </span>
                    </label>
                    <label class="payment-method-option">
                        <input type="radio" name="paymentMethod" value="cod">
                        <span class="payment-method-label">
                            <i class="fas fa-money-bill-wave"></i> Cash on Delivery
                        </span>
                    </label>
                </div>
            </div>

            <form id="paymentForm">
                <div id="cardPaymentForm" class="payment-form-section">
                    <div class="form-group">
                        <label for="cardNumber">Card Number</label>
                        <input type="text" id="cardNumber" placeholder="XXXX XXXX XXXX XXXX" pattern="[0-9]{13,19}" title="Credit card numbers must be between 13 and 19 digits long." inputmode="numeric">
                    </div>
                    <div class="form-group">
                        <label for="cardName">Name on Card</label>
                        <input type="text" id="cardName" placeholder="Full Name">
                    </div>
                    <div class="flex-row">
                        <div class="form-group">
                            <label for="expiryDate">Expiry Date</label>
                            <input type="text" id="expiryDate" placeholder="MM/YY" pattern="(0[1-9]|1[0-2])\/?([0-9]{2})" title="Enter in MM/YY format, e.g., 12/25" inputmode="numeric">
                        </div>
                        <div class="form-group">
                            <label for="cvv">CVV</label>
                            <input type="password" id="cvv" placeholder="XXX" pattern="[0-9]{3,4}" title="CVV must be 3 or 4 digits" inputmode="numeric" maxlength="4">
                        </div>
                    </div>
                </div>

                <div id="upiPaymentForm" class="payment-form-section hidden">
                    <div class="payment-qr-card">
                        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjoAAAI6AQAAAAAGM99tAAAGKElEQVR4nO1dXW7jPAykHAN9dIAeYI/i3mzP9N3APkoPUMB+LJCAH0hRP043K6lN47Y785Dalky4zESghpTsmG6CubuNHSIYKgM+KgM+KgM+KgM+KgM+KgM+KgM+KgM++r4+coZejnrf4txRG/p4FLo8SevTGq48fel/7QbobmFEAEP399HIgkWPz45o7Yn5WTg+nOzauByYRj4RT6tzRHTQe8IMFN9aGfDRDj5abfBlFgJ7Pg+vjidpHJ8fAoHXxHYb0T/riT6M7uMmPGDoJ/jIPQ2vjuZjOB/9wC0cl4YIT/l7PNG70b3/1i1g6Dv6qH9zZT0Sjcu5JxoWFi47mt2BnZzS/OvVsQQin/dEHQwVAR9VwMfKFmeHQMSH0xpJL/qhXROfY0O8d4Kzy4CP7u+jWVWOY4yp1wd2vxcJTkg/ZPIo9PbTSN9w9tLIJz3Rx9HdwIYChr5vNMLxnOdfJzm1DwXTevEh8snAX/xf62CoiH/BR2ev9WVDuIzKJA3OHcORjtSqoUyhAXr2T/j6f56h3v6uR3LjdCJH1J9olPF41kBjOPU0Tufe6ZGN1BzCbolabvxEHQwVAR9VIGVbdMqoQTRPg1wLsrVBrmmcLQ1+BunVbswgKwFC3p3ZzGyKiKetF6uV3mTadS6GCPnlDmgjbega+18FDNVrI5qakZy6sNj9VgnkWYSPQdnOnELskMc5+GtbQx9HB0NFwEf10cjwRtTmKSjblDRur2yHzr4V0UgtQMh9cpA8u8NJJopE40QyM3xgm0b62eKj/gK0yIR4Pr7IvZKcvO0TdTBUBHxUAR8765TRj8B+BhnH7EUr/KSL9PYhdparDEAOsgIg5P1nkJM/UW3Ekug2R1zyjLtPRNokc0NvMLsCYPbdmU0WWNsAHOgdOb6oLGJD+IUsAmZXA8zeQfVbQmGqxRvapqMyW5gSVWwbuKUsCnp2E7q27tcBQw2Zmrje4DIkMWS1fp7oeqRVUtKMaKQCIOQOcfZgwfYmK2NEV2Q5SF/jqneE+AXMrgGYfXfVz+lSA60W8adSQTJOXusjKYbqafzPxSLAfOWBGzUmwbdWBny0mzZCl6EG56JJGMx9VYkC2kgLuqbefwEMVcBCDeVuCDreiCFLmEtaSGLRNfTsNnSN/a8ChipgcbLXPNKHrZ/hVP+nvwBTSVLVH+LsBoCQe8wgTzYMR5nPcjFk6yDDR1ICQz/MIGsBZu+RqeEg6YVI2jLui17djM+mdocGqH61ALP3ydSQp6gntRVpsx0FeduCk6RsIxppAJi9Q63fIEvB1seTG597KfgTNY9l05G1J0fDi1RqL3IkPwFfsy21futjUFLwrZUBH+0TjXCertmMypNm0mMA7lPxKWBBpqYSYPYOzCbTQSzzGBeKcVT9okCS3ZEFMfjWyoCP9smuU8yaW0MqzR6Cxm2591Q+hRlkA8DsfVb4ctzuLA9Ohrj8IFX4eZUkCH5Q/WoBZu/EbI+4K0NKp7NvjcsPMlJj5UEDwOz7x9lj2pgyretVDNuFvF4JtF8AVh60oWvsfxUwVM9spW3Imlu+MVudfroUQ+xuXY2g98LZZcBH99+xcj6+9CxStu5JqcvRRcXO9kYTZVuE7nMv22mfVM8WfuNtHvUAs/dR/Si9rGZbyEdxkA5VrGG66VOSGLMrAWbvvaaGLCETq5+WsNgml0pC3SuYXQswe5+VBxw5npayU6Zx+5y65XHSrgyIs6sBZu+Ug+RMG0n5GbJ+Ru+0ZwMqolrRNd9xBTBUgRBMx5h6k3mkjPI+SRNK//JibmgjdQAh9xizFSErY7sMRxYvYQcGQZ5YR91IC7qm3n8BDLXp2VYZ8ocVkUtoUMR5Y9gyCmN2HUDIPXKQlC+nsblkHL0pbPOXdvNTYOVBE7q27tcBQ+3MznaLMhX7kJWH5KskA70xZlcDhNzRRxw399MXjLGQ2rmjUt5eP+Zfi/C0PsQ3Q37qE70b3ftv3QKGfkSczWmpQVJMliiLZBtYYr+R7//1d/+QNjKFLGO2RH3cnsb8DN7m8d2//u7nGnLbN/G+G/PX+9c6GCoCPioDPioDPioDPioDPioDPioDPioDPirjZjPI/wHfPjSFJ69txAAAAABJRU5ErkJggg=="
                        alt="UPI QR Code" class="payment-qr-image">
                        <p class="payment-qr-id">UPI ID: nazimdawoodrahuman-1@okicici</p>
                        <div class="payment-qr-caption">
                            <p>Scan this QR code with your UPI app</p>
                            <small>Google Pay, PhonePe, BHIM, or any UPI app</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="upiTransactionId">UPI Transaction ID (after payment)</label>
                        <input type="text" id="upiTransactionId" placeholder="Enter transaction ID from your UPI app">
                    </div>
                </div>

                <div id="codPaymentForm" class="payment-form-section hidden">
                    <div class="cod-info">
                        <i class="fas fa-info-circle"></i>
                        <p>You will pay <span id="codAmount">INR 0.00</span> when your order is delivered.</p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="shippingAddress">Shipping Address</label>
                    <textarea id="shippingAddress" placeholder="Enter your complete shipping address" rows="3" required></textarea>
                </div>

                <div class="payment-buttons">
                    <button type="submit" class="pay-now-btn">Place Order</button>
                    <button type="button" id="backToCartBtn" class="back-to-cart-btn">Back to Cart</button>
                </div>
            </form>
        </section>
    </main>
      
    
    <div id="tempMessage" class="temp-message hidden"></div>

    <!-- Cart Sidebar -->
    <div id="cartSidebar" class="fixed right-0 top-0 h-full w-full max-w-sm bg-white shadow-xl z-20 transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col">
        <div class="p-4 border-b flex justify-between items-center bg-gray-50">
            <h2 class="text-xl font-semibold text-gray-800">Your Cart</h2>
            <button id="closeCartButton" class="text-gray-500 hover:text-gray-700 text-3xl leading-none font-light">&times;</button>
        </div>
        <div id="cartItemsContainer" class="cart-items-container">
            <div id="emptyCartMessage" class="text-center text-gray-500 mt-8">Your cart is empty.</div>
        </div>
        <div class="w-full bg-white p-4 border-t shadow-md">
            <div class="flex justify-between items-center font-bold text-lg mb-4">
                <span>Total:</span>
                <span id="cartTotal">INR 0.00</span>
            </div>
            <button id="checkoutButton" class="w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition duration-300 font-semibold">Proceed to Checkout</button>
        </div>
    </div>
    <div id="cartOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-19 hidden"></div>

    <div id="productModal" class="hidden">
        <div class="modal-content">
            <button id="closeModalButton" class="modal-close-btn">&times;</button>
            <div class="modal-img-container">
                <img id="modalProductImage" src="" alt="Product Image" class="modal-product-image">
            </div>
            <div class="modal-details">
                <h2 id="modalProductName" class="modal-product-name"></h2>
                <p id="modalProductCategory" class="modal-product-category"></p>
                <div id="modalProductRating" class="modal-product-rating"></div>
                <p id="modalProductDescription" class="modal-product-description"></p>
                <div class="modal-price-info">
                    <span id="modalProductPrice" class="modal-product-price"></span>
                    <span id="modalProductOriginalPrice" class="modal-product-original-price"></span>
                    <span id="modalProductDiscount" class="modal-product-discount"></span>
                </div>
                <button id="modalAddToCartButton" class="modal-add-to-cart-btn">
                    <i class="fas fa-shopping-cart"></i> Add to Cart
                </button>
            </div>
        </div>
    </div>    <div id="productModalOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-[1000] hidden"></div>

    <div id="authSection" class="auth-section">
        <div class="auth-container">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-6">Welcome to ShopZone</h2>

            <div class="tabs">
                <button id="loginTab" class="tab-button active">Login</button>
                <button id="signupTab" class="tab-button">Sign Up</button>
            </div>

            <div id="loginFormSection">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginUsername">Username/Email</label>
                        <input type="email" id="loginUsername" placeholder="your@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" placeholder="********" required>
                    </div>
                    <button type="submit" class="auth-button">Login</button>
                </form>
                <div id="loginMessageBox" class="message-box"></div>
            </div>

            <div id="signupFormSection" class="hidden">
                <form id="signupForm">
                    <div class="form-group">
                        <label for="signupUsername">Username/Email</label>
                        <input type="email" id="signupUsername" placeholder="your@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" placeholder="********" required>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" placeholder="********" required>
                    </div>
                    <div class="form-group">
                        <label for="fullName">Full Name</label>
                        <input type="text" id="fullName" placeholder="John Doe" required>
                    </div>
                    <div class="form-group">
                        <label for="phoneNumber">Phone Number</label>
                        <input type="tel" id="phoneNumber" placeholder="9876543210" pattern="[0-9]{10}" title="Please enter a 10-digit phone number" inputmode="tel" required>
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" id="address" placeholder="123 Main St, City, State, Zip" required>
                    </div>
                    <button type="submit" class="auth-button">Sign Up</button>
                </form>
                <div id="signupMessageBox" class="message-box"></div>
            </div>

            <div class="guest-link-container">
                <button id="continueAsGuestBtn">Continue as Guest</button>
            </div>
        </div>
      </div>

    <div id="orderListModal" class="order-list-modal">
        <div class="order-list-content">
            <button id="closeOrderListModalBtn" class="modal-close-btn">&times;</button>
            <h2 class="text-center text-3xl font-bold mb-6 text-gray-800">Your Orders</h2>
            <div id="ordersContainer">            

            </div>
            <p id="noOrdersMessage" class="no-orders-message hidden">You have no past orders.</p>
        </div>
    </div>
    <div id="orderListModalOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-[1000] hidden"></div>


    <footer class="main-footer">
        <div class="container mx-auto footer-grid">
            <div class="footer-column">
                <h3>About ShopZone</h3>
                <ul>
                    <li><a href="#" class="footer-link">Contact Us</a></li>
                    <li><a href="#" class="footer-link">About Us</a></li>
                    <li><a href="#" class="footer-link">Careers</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Help</h3>
                <ul>
                    <li><a href="#" class="footer-link">Payments</a></li>
                    <li><a href="#" class="footer-link">Shipping</a></li>
                    <li><a href="#" class="footer-link">Returns</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Connect</h3>
                <div class="footer-social-links">
                    <a href="#" class="footer-link"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="footer-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="footer-link"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-copy">
            <p>&copy; 2025 ShopZone. All Rights Reserved.</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
    <script>
        var swiper = new Swiper(".swiper-container", {
            loop: true,
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
            },
            pagination: {
                el: ".swiper-pagination",
                clickable: true,
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
        });

        const products = [
  {
    name: "T-Shirt",
    price: 499,
    category: "Fashion",
    image: "img/tshirt.png"
  },
  {
    name: "Casual T-Shirt",
    price: 699,
    category: "Fashion",
    image: "img/tshirt.webp"
  },
  {
    name: "Mountain Cycle",
    price: 12999,
    category: "Sports",
    image: "img/mountain-cycle.png"
  },
  {
    name: "Sports Cycle",
    price: 10999,
    category: "Sports",
    image: "img/Cycle.png"
  },
  {
    name: "Running Shoes",
    price: 2999,
    category: "Sports",
    image: "img/running-shoes.png"
  },
  {
    name: "Nike Running Shoes",
    price: 3499,
    category: "Sports",
    image: "img/running shoes.webp"
  },
  {
    name: "Smart Watch",
    price: 1999,
    category: "Electronics",
    image: "img/smart-watch.png"
  },
  {
    name: "Huawei Watch",
    price: 5999,
    category: "Electronics",
    image: "img/Watch1.png"
  },
  {
    name: "Gold Watch",
    price: 7999,
    category: "Electronics",
    image: "img/Watch2.jpg"
  },
  {
    name: "Google Pixel 7",
    price: 25999,
    category: "Mobiles",
    image: "img/google-pixel-7.png"
  },
  {
    name: "OnePlus 11",
    price: 31999,
    category: "Mobiles",
    image: "img/oneplus-11.png"
  },
  {
    name: "iPhone",
    price: 79999,
    category: "Mobiles",
    image: "img/iphone.webp"
  },
  {
    name: "iPhone 14 Pro Max",
    price: 109999,
    category: "Mobiles",
    image: "img/iphone-14-pro-max.png"
  },
  {
    name: "Android Smartphone",
    price: 14999,
    category: "Mobiles",
    image: "img/Smartphone.webp"
  },
  {
    name: "Wireless Headphones",
    price: 2499,
    category: "Electronics",
    image: "img/wireless-headphones.png"
  },
  {
    name: "Bluetooth Speaker",
    price: 1999,
    category: "Electronics",
    image: "img/speaker.jpeg"
  },
  {
    name: "Cookware Set",
    price: 3499,
    category: "Home & Furniture",
    image: "img/cookware.jpeg"
  },
  {
    name: "Knife Set",
    price: 1299,
    category: "Home & Furniture",
    image: "img/chef knife.jpeg"
  },
  {
    name: "Laptop",
    price: 55999,
    category: "Electronics",
    image: "img/Acer1.png"
  },
  {
    name: "Camera",
    price: 19999,
    category: "Electronics",
    image: "img/camera.webp"
  },
  {
    name: "Tablet",
    price: 22999,
    category: "Electronics",
    image: "img/tablet.avif"
  },
  {
    name: "Toothbrush",
    price: 899,
    category: "Health & Personal Care",
    image: "img/toothbrush.jpeg"
  },
  {
    name: "Yoga Mat",
    price: 799,
    category: "Sports",
    image: "img/yoga mat.jpeg"
  },
  {
    name: "Teddy Bear",
    price: 499,
    category: "Toys",
    image: "img/toys.jpeg"
  },
  {
    name: "Robot Kit",
    price: 2499,
    category: "Toys",
    image: "img/robot kit.jpeg"
  }
];

        </script>
        <script>
const localImages = {
  "Samsung S22 Ultra 5G": "/img/samsung-s22.png",
  "iPhone 14 Pro Max": "/img/iphone-14-pro-max.png",
  "OnePlus 11": "/img/oneplus-11.png",
  "Google Pixel 7": "/img/google-pixel-7.png",
  "Xiaomi 12 Pro": "/img/xiaomi-12-pro.jpg",

  "Acer Predator i5 Laptop": "/img/acer-predator-laptop.png",
  "Gaming Laptop (RTX 3070)": "/img/gaming-laptop-rtx.png",
  "Wireless Headphones NC": "/img/wireless-headphones.png",
  "Smart Watch": "/img/smart-watch.png",
  "Bluetooth Speaker": "/img/bluetooth-speaker.png",
  "Drawing Tablet": "/img/drawing-tablet.png",
  "Gaming Mouse RGB": "/img/gaming-mouse.png",
  "Sony WH-1000XM5": "/img/sony-headphones.png",
  "Dell UltraBook 15": "/img/dell-ultrabook.png",
  "iPad Pro 12.9": "/img/ipad-pro.png",

  "Mountain Cycle": "/img/mountain-cycle.png",
  "Running Shoes": "/img/running-shoes.png",
  "Yoga Mat": "/img/yoga-mat.png",
  "Adventure Backpack 50L": "/img/adventure-backpack.png",
  "Nike Air Max 90": "/img/nike-air-max.png",
  "Puma Sports Track Suit": "/img/puma-tracksuit.png",
  "Cricket Bat": "/img/cricket-bat.png",

  "Organic Cotton T-Shirt": "/img/tshirt.png",
  "Denim Jeans Slim Fit": "/img/denim-jeans.png",
  "Casual Shirt Blue": "/img/casual-shirt.png",
  "Winter Jacket Wool": "/img/winter-jacket.png",

  "Cookware Set 10Pc": "/img/cookware-set.png",
  "Chef Knife Set": "/img/chef-knife.png",
  "Dining Table Set": "/img/dining-table.png",
  "Bed Frame Queen": "/img/bed-frame.png",
  "Sofa Set 3 Seater": "/img/sofa-set.png",

  "Security Camera 1080p": "/img/security-camera.png",
  "Espresso Machine": "/img/espresso-machine.png",
  "Microwave Oven 30L": "/img/microwave.png",
  "Washing Machine": "/img/washing-machine.png",
  "Refrigerator": "/img/refrigerator.png",

  "Electric Toothbrush": "/img/electric-toothbrush.png",
  "Fitness Tracker Band": "/img/fitness-band.png",
  "Hair Dryer Professional": "/img/hair-dryer.png",

  "Robot Kit Educational": "/img/robot-kit.png",
  "LEGO Technic Set": "/img/lego-technic.png",
  "Drone 4K Camera": "/img/drone.png",
  "RC Car High Speed": "/img/rc-car.png",

  "Acoustic Guitar": "/img/acoustic-guitar.png",
  "Electric Guitar": "/img/electric-guitar.png",
  "Digital Keyboard 61K": "/img/keyboard.png",
  "Ukulele Beginner": "/img/ukulele.png"
};

// Apply local images to products
products.forEach(p => {
  if (localImages[p.name]) {
    p.image = localImages[p.name];
  }
});
</script>
        <script>
  const product_ImageMap = {
    "Samsung S22 Ultra 5G": "/img/samsung-s22.png",
    "iPhone 14 Pro Max": "/img/iphone-14-pro-max.png",
    "OnePlus 11": "/img/oneplus-11.png",
    "Google Pixel 7": "/img/google-pixel-7.png",
    "Xiaomi 12 Pro": "/img/xiaomi-12-pro.jpg",

    "Acer Predator i5 Laptop": "/img/acer-predator-laptop.png",
    "Gaming Laptop (RTX 3070)": "/img/gaming-laptop-rtx.png",
    "Wireless Headphones NC": "/img/wireless-headphones.png",
    "Smart Watch": "/img/smart-watch.png",
    "Bluetooth Speaker": "/img/bluetooth-speaker.png",

    "Mountain Cycle": "/img/mountain-cycle.png",
    "Running Shoes": "/img/running-shoes.png",

    "Organic Cotton T-Shirt": "/img/tshirt.png",

    "Cookware Set 10Pc": "/img/cookware-set.png",

    "Security Camera 1080p": "/img/security-camera.png",

    "Electric Toothbrush": "/img/electric-toothbrush.png",

    "Robot Kit Educational": "/img/robot-kit.png",

    "Acoustic Guitar": "/img/acoustic-guitar.png"
  };

  // Replace online image URLs with local ones
  products.forEach(p => {
    if (productImageMap[p.name]) {
      p.image = productImageMap[p.name];
    }
  });
</script>
<script>
  const productImageMap = {
    // Fashion
    "T-Shirt": "img/tshirt.png",
    "Casual T-Shirt": "img/tshirt.webp",

    // Bikes
    "Mountain Cycle": "img/mountain-cycle.png",
    "Sports Cycle": "img/Cycle.png",

    // Shoes
    "Running Shoes": "img/running-shoes.png",
    "Nike Running Shoes": "img/running shoes.webp",

    // Watches
    "Smart Watch": "img/smart-watch.png",
    "Digital Watch": "img/Watch.png",
    "Huawei Watch": "img/Watch1.png",
    "Gold Smart Watch": "img/Watch2.jpg",

    // Mobiles
    "Google Pixel": "img/google-pixel-7.png",
    "OnePlus Phone": "img/oneplus-11.png",
    "iPhone": "img/iphone.webp",
    "iPhone 14 Pro": "img/iphone-14-pro-max.png",
    "Vivo Phone": "img/Vivo.png",
    "Android Phone": "img/Smartphone.webp",

    // Bags
    "Backpack": "img/backpack.jpeg",

    // Audio
    "Wireless Headphones": "img/wireless-headphones.png",
    "Headphones": "img/headphone.jpeg",
    "Bluetooth Speaker": "img/speaker.jpeg",

    // Kitchen
    "Cookware Set": "img/cookware.jpeg",
    "Knife Set": "img/chef knife.jpeg",

    // Electronics
    "Laptop": "img/Acer1.png",
    "Gaming Laptop": "img/gaming laptop.avif",
    "Camera": "img/camera.webp",
    "Tablet": "img/tablet.avif",

    // Health
    "Toothbrush": "img/toothbrush.jpeg",
    "Yoga Mat": "img/yoga mat.jpeg",

    // Toys
    "Teddy Bear": "img/toys.jpeg",
    "Robot Kit": "img/robot kit.jpeg"
  };

  // Fix images automatically
  products.forEach(p => {
    if (productImageMap[p.name]) {
      p.image = productImageMap[p.name];
    }
  });
</script>



        
    <script>

        let cart = [];
        let currentSearchTerm = '';
        let selectedCategory = 'All';
        
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const searchSuggestions = document.getElementById('searchSuggestions'); 
        const productGrid = document.getElementById('productGrid'); 
        const noProductsMessage = document.getElementById('noProductsMessage');
        const cartButton = document.getElementById('cartButton');
        const cartCount = document.getElementById('cartCount');
        const tempMessage = document.getElementById('tempMessage'); 

        const cartSidebar = document.getElementById('cartSidebar');
        const closeCartButton = document.getElementById('closeCartButton');
        const cartItemsContainer = document.getElementById('cartItemsContainer');
        const emptyCartMessage = document.getElementById('emptyCartMessage');
        const cartTotal = document.getElementById('cartTotal');
        const cartOverlay = document.getElementById('cartOverlay'); 
        const checkoutButton = document.getElementById('checkoutButton'); 

        const productModal = document.getElementById('productModal');
        const productModalOverlay = document.getElementById('productModalOverlay');
        const closeModalButton = document.getElementById('closeModalButton');
        const modalProductImage = document.getElementById('modalProductImage');
        const modalProductName = document.getElementById('modalProductName');
        const modalProductCategory = document.getElementById('modalProductCategory');
        const modalProductDescription = document.getElementById('modalProductDescription');
        const modalProductPrice = document.getElementById('modalProductPrice');
        const modalProductOriginalPrice = document.getElementById('modalProductOriginalPrice');
        const modalProductDiscount = document.getElementById('modalProductDiscount');
        const modalProductRating = document.getElementById('modalProductRating');
        const modalAddToCartButton = document.getElementById('modalAddToCartButton');

        const paymentSection = document.getElementById('paymentSection');
        const productSection = document.getElementById('productSection'); 
        const paymentForm = document.getElementById('paymentForm');
        const backToCartBtn = document.getElementById('backToCartBtn');
        const cardNumberInput = document.getElementById('cardNumber');
        const cardNameInput = document.getElementById('cardName');
        const expiryDateInput = document.getElementById('expiryDate');
        const cvvInput = document.getElementById('cvv');

        const userAccountBtn = document.getElementById('userAccountBtn'); 
        const userNameDisplay = document.getElementById('userNameDisplay');
        const logoutButton = document.getElementById('logoutButton');
        const authSection = document.getElementById('authSection'); 
        const loginTab = document.getElementById('loginTab');
        const signupTab = document.getElementById('signupTab');
        const loginFormSection = document.getElementById('loginFormSection');
        const signupFormSection = document.getElementById('signupFormSection');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const loginMessageBox = document.getElementById('loginMessageBox');
        const signupMessageBox = document.getElementById('signupMessageBox');
        const continueAsGuestBtn = document.getElementById('continueAsGuestBtn'); 

        const loginUsernameInput = document.getElementById('loginUsername');
        const loginPasswordInput = document.getElementById('loginPassword');

        const signupUsernameInput = document.getElementById('signupUsername');
        const signupPasswordInput = document.getElementById('signupPassword');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const fullNameInput = document.getElementById('fullName');
        const phoneNumberInput = document.getElementById('phoneNumber');
        const addressInput = document.getElementById('address');

        const ordersLink = document.getElementById('ordersLink');
        const orderListModal = document.getElementById('orderListModal');
        const closeOrderListModalBtn = document.getElementById('closeOrderListModalBtn');
        const ordersContainer = document.getElementById('ordersContainer');
        const noOrdersMessage = document.getElementById('noOrdersMessage');
        const orderListModalOverlay = document.getElementById('orderListModalOverlay');


        const formatCurrency = (amount) => new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR' }).format(amount);
        
        const getStarRatingHtml = (rating) => {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (rating >= i) { stars += '<i class="fas fa-star"></i>'; }
                else if (rating > (i - 1) && rating < i) { stars += '<i class="fas fa-star-half-alt"></i>'; }
                else { stars += '<i class="far fa-star"></i>'; }
            }
            return stars;
        };

        const createProductCard = (product) => {
            const card = document.createElement('div');
            card.className = 'prod-item'; 
            card.setAttribute('data-product-id', product.id);

            const discount = product.originalPrice && product.originalPrice > product.price
                ? ((product.originalPrice - product.price) / product.originalPrice * 100).toFixed(0)
                : 0;

            card.innerHTML = `
                <a href="#" class="block w-full">
                    <img src="${product.image}" alt="${product.name}" class="prod-img">
                </a>
                <h2>
                    <a href="#" class="text-gray-900 hover:text-blue-700 transition block leading-tight">
                        ${product.name}
                    </a>
                </h2>
                <p class="text-blue-600 mb-1">${product.category}</p>
                <div class="prod-rating">
                    ${getStarRatingHtml(product.rating)}
                    <span class="ml-1 text-gray-600 text-xs">(${product.rating})</span>
                </div>
                <p class="mb-2">
                    <span class="price">${formatCurrency(product.price)}</span>
                    ${product.originalPrice > product.price ? `<del>${formatCurrency(product.originalPrice)}</del>` : ''}
                </p>
                ${discount > 0 ? `<p class="discount">${discount}% off</p>` : ''}
                <button class="btn-add-to-cart mt-3">
                    <i class="fas fa-shopping-cart mr-2"></i> Add to Cart
                </button>
            `;

            card.querySelector('img').addEventListener('click', (event) => {
                event.preventDefault(); 
                showProductDetail(product); 
            });
            card.querySelector('h2 a').addEventListener('click', (event) => {
                event.preventDefault(); 
                showProductDetail(product); 
            });
            card.querySelector('.btn-add-to-cart').addEventListener('click', (event) => {
                event.stopPropagation(); 
                addProductToCart(product); 
            });

            return card;
        };

        const displayProducts = (productsToDisplay) => {
            productGrid.innerHTML = ''; 
            if (productsToDisplay.length === 0) {
                noProductsMessage.classList.remove('hidden');
            } else {
                noProductsMessage.classList.add('hidden');
                productsToDisplay.forEach(product => {
                    productGrid.appendChild(createProductCard(product));
                });
            }
        };

        const getCategories = () => {
            const categories = ['All', ...new Set(products.map(p => p.category))];
            return categories;
        };

        const renderCategoryFilters = () => {
            const categoryContainer = document.createElement('div');
            categoryContainer.className = 'category-filters flex gap-2 mb-6 overflow-x-auto pb-2';
            
            getCategories().forEach(category => {
                const btn = document.createElement('button');
                btn.textContent = category;
                btn.className = `category-btn px-4 py-2 rounded-full font-semibold transition ${
                    selectedCategory === category 
                        ? 'bg-blue-600 text-white' 
                        : 'bg-gray-200 text-gray-800 hover:bg-gray-300'
                }`;
                
                btn.addEventListener('click', () => {
                    selectedCategory = category;
                    currentSearchTerm = '';
                    searchInput.value = '';
                    filterProducts();
                    renderCategoryFilters();
                });
                
                categoryContainer.appendChild(btn);
            });
            
            const existingFilters = document.querySelector('.category-filters');
            if (existingFilters) {
                existingFilters.replaceWith(categoryContainer);
            } else {
                productSection.insertBefore(categoryContainer, productGrid);
            }
        };

        const filterProducts = () => {
            let filteredProducts = products;

            if (selectedCategory !== 'All') {
                filteredProducts = filteredProducts.filter(p => p.category === selectedCategory);
            }

            if (currentSearchTerm) {
                const searchTermLower = currentSearchTerm.toLowerCase();
                filteredProducts = filteredProducts.filter(p => 
                    p.name.toLowerCase().includes(searchTermLower) || 
                    p.description.toLowerCase().includes(searchTermLower) || 
                    p.category.toLowerCase().includes(searchTermLower)
                );
            }
            
            displayProducts(filteredProducts);
        };

        const handleSearch = () => {
            currentSearchTerm = searchInput.value.trim();
            selectedCategory = 'All';
            filterProducts();
            renderCategoryFilters();
        };
        
        let currentProductInModal = null; 

        const showProductDetail = (product) => {
            currentProductInModal = product; 
            modalProductImage.src = product.image;
            modalProductImage.alt = product.name;
            modalProductName.textContent = product.name;
            modalProductCategory.textContent = product.category;
            modalProductDescription.textContent = product.description;
            modalProductPrice.textContent = formatCurrency(product.price);
            modalProductRating.innerHTML = getStarRatingHtml(product.rating) + `<span class="ml-1 text-gray-600 text-xs">(${product.rating})</span>`;

            if (product.originalPrice && product.originalPrice > product.price) {
                modalProductOriginalPrice.textContent = formatCurrency(product.originalPrice);
                modalProductOriginalPrice.classList.remove('hidden');
                const discount = ((product.originalPrice - product.price) / product.originalPrice * 100).toFixed(0);
                modalProductDiscount.textContent = `${discount}% off`;
                modalProductDiscount.classList.remove('hidden');
            } else {
                modalProductOriginalPrice.classList.add('hidden');
                modalProductDiscount.classList.add('hidden');
            }

            modalAddToCartButton.onclick = () => {
                addProductToCart(currentProductInModal);
                hideProductDetail(); 
            };

            productModal.classList.add('open');
            productModal.classList.remove('hidden'); 
            productModalOverlay.classList.add('open');
            productModalOverlay.classList.remove('hidden'); 
            document.body.classList.add('overflow-hidden'); 
        };

        const hideProductDetail = () => {
            productModal.classList.remove('open');
            setTimeout(() => {
                productModal.classList.add('hidden'); 
            }, 300); 
            
            productModalOverlay.classList.remove('open');
            setTimeout(() => {
                productModalOverlay.classList.add('hidden'); 
            }, 300);
            document.body.classList.remove('overflow-hidden'); 
        };


        // --- Cart Functions ---
        const addProductToCart = (productToAdd) => {
            const existingItemIndex = cart.findIndex(item => item.id === productToAdd.id);
            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity++;
                showTemporaryMessage(`${productToAdd.name} quantity updated in cart!`);
            } else {
                cart.push({ ...productToAdd, quantity: 1 });
                showTemporaryMessage(`${productToAdd.name} added to cart!`);
            }
            updateCartCount(); 
            console.log('Current Cart:', cart); 
            renderCart(); 
        };

        const removeProductFromCart = (productId) => { 
            cart = cart.filter(item => item.id !== productId);
            updateCartCount();
            renderCart(); 
            showTemporaryMessage('Item removed from cart.');
        };

        const updateCartQuantity = (productId, newQuantity) => { 
            const itemIndex = cart.findIndex(item => item.id === productId);
            if (itemIndex > -1) {
                if (newQuantity < 1) {
                    removeProductFromCart(productId); 
                } else {
                    cart[itemIndex].quantity = newQuantity;
                    showTemporaryMessage(`Quantity updated for ${cart[itemIndex].name}.`);
                }
            }
            updateCartCount();
            renderCart(); 
        };

        const updateCartCount = () => { 
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems; 
            cartCount.classList.toggle('hidden', totalItems === 0); 
        }; 

        const showTemporaryMessage = (message) => {
            tempMessage.textContent = message;
            tempMessage.classList.add('show');
            tempMessage.classList.remove('hidden');

            setTimeout(() => {
                tempMessage.classList.remove('show');
                setTimeout(() => {
                    tempMessage.classList.add('hidden');
                }, 500); 
            }, 2500); 
        };

        const openCart = () => {
            cartSidebar.classList.add('open');
            cartOverlay.classList.add('open');
            document.body.classList.add('overflow-hidden'); 
            renderCart(); 
        };

        const closeCart = () => {
            cartSidebar.classList.remove('open');
            cartOverlay.classList.remove('open');
            document.body.classList.remove('overflow-hidden'); 
        };

        const renderCart = () => {
            cartItemsContainer.innerHTML = ''; 
            let currentTotal = 0;

            if (cart.length === 0) {
                emptyCartMessage.classList.remove('hidden');
            } else {
                emptyCartMessage.classList.add('hidden');
                // Save cart to localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                
                cart.forEach(item => {
                    const itemElement = document.createElement('div');
                    itemElement.className = 'cart-item-element'; 

                    currentTotal += item.price * item.quantity;

                    itemElement.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                        <div class="cart-item-details">
                            <h3 class="cart-item-name">${item.name}</h3>
                            <p class="cart-item-price">${formatCurrency(item.price)}</p>
                            <div class="cart-quantity-controls">
                                <button class="quantity-btn decrease" data-product-id="${item.id}">-</button>
                                <input type="number" value="${item.quantity}" min="1" class="quantity-input" data-product-id="${item.id}">
                                <button class="quantity-btn increase" data-product-id="${item.id}">+</button>
                            </div>
                        </div>
                        <button class="remove-item-btn" data-product-id="${item.id}">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    `;
                    cartItemsContainer.appendChild(itemElement);

                    itemElement.querySelector('.quantity-btn.decrease').addEventListener('click', () => updateCartQuantity(item.id, item.quantity - 1));
                    itemElement.querySelector('.quantity-btn.increase').addEventListener('click', () => updateCartQuantity(item.id, item.quantity + 1));
                    itemElement.querySelector('.quantity-input').addEventListener('change', (e) => {
                        const newQty = parseInt(e.target.value);
                        if (!isNaN(newQty) && newQty >= 1) {
                            updateCartQuantity(item.id, newQty);
                        }
                    });

                    itemElement.querySelector('.remove-item-btn').addEventListener('click', () => removeProductFromCart(item.id));
                });
            }

            cartTotal.textContent = formatCurrency(currentTotal);
        };

        const checkUserStatus = () => {
            const loggedInUser = localStorage.getItem('loggedInUser');
            if (loggedInUser) {
                const userData = JSON.parse(loggedInUser);
                userNameDisplay.textContent = userData.fullName || userData.username; 
                userAccountBtn.removeEventListener('click', triggerAuthSection); 
                userAccountBtn.addEventListener('click', showUserProfile); 
                logoutButton.classList.remove('hidden');
                
                // Remove old event listeners
                ordersLink.removeEventListener('click', showOrderListModal);
                ordersLink.removeEventListener('click', () => showTemporaryMessage("Please login to view your orders."));
                
                // Add new event listener for orders
                ordersLink.addEventListener('click', showOrderListModal);
                ordersLink.style.cursor = 'pointer';
                
                // Add dashboard button only once
                const existingDashboard = userAccountBtn.parentElement.querySelector('[data-dashboard="true"]');
                if (!existingDashboard) {
                    const dashboardBtn = document.createElement('button');
                    dashboardBtn.className = 'nav-link';
                    dashboardBtn.setAttribute('data-dashboard', 'true');
                    dashboardBtn.innerHTML = '<i class="fas fa-th-large"></i> Dashboard';
                    dashboardBtn.addEventListener('click', () => window.location.href = 'dashboard.html');
                    userAccountBtn.parentElement.insertBefore(dashboardBtn, ordersLink);
                }
                
                showTemporaryMessage(`Welcome back, ${userData.fullName || userData.username}!`);
            } else {
                userNameDisplay.textContent = "Login"; 
                userAccountBtn.removeEventListener('click', showUserProfile); 
                userAccountBtn.addEventListener('click', triggerAuthSection); 
                logoutButton.classList.add('hidden');
                
                // Remove old event listeners
                ordersLink.removeEventListener('click', showOrderListModal);
                
                // Add message for non-logged in users
                ordersLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    showTemporaryMessage("Please login to view your orders.");
                });
                ordersLink.style.cursor = 'default';
                
                // Remove dashboard button
                const dashboardBtn = userAccountBtn.parentElement.querySelector('[data-dashboard="true"]');
                if (dashboardBtn) {
                    dashboardBtn.remove();
                }
            }
        };

        const logoutUser = () => {
            // Remove user data from localStorage
            localStorage.removeItem('loggedInUser');
            localStorage.removeItem('authToken');
            
            // Clear cart
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Show message
            showTemporaryMessage("You have been logged out successfully.");
            
            // Reset UI after a short delay
            setTimeout(() => {
                checkUserStatus();
                hideAuthSection();
                updateCartCount();
                renderCart();
                // Redirect to home
                window.location.reload();
            }, 1500);
        };

        const showUserProfile = (event) => {
            event.preventDefault();
            const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
            if (loggedInUser) {
                showTemporaryMessage(`User Profile:
                                      Full Name: ${loggedInUser.fullName || 'N/A'}
                                      Email: ${loggedInUser.username}
                                      Phone: ${loggedInUser.phoneNumber || 'N/A'}
                                      Address: ${loggedInUser.address || 'N/A'}`, 'success'); 
            }
        };

        
        const showOrderListModal = (e) => {
            if (e) e.preventDefault();
            
            const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
            if (!loggedInUser) {
                showTemporaryMessage("Please login to view your orders.");
                return;
            }

            hideAuthSection();
            hidePaymentSection();
            hideProductDetail(); 

            orderListModal.classList.add('open');
            orderListModalOverlay.classList.add('open');
            document.body.classList.add('overflow-hidden'); 
            renderOrders(loggedInUser.username);
        };

        const hideOrderListModal = () => {
            orderListModal.classList.remove('open');
            orderListModalOverlay.classList.remove('open');
            document.body.classList.remove('overflow-hidden'); 
        };

        const renderOrders = (userId) => {
            ordersContainer.innerHTML = '';
            const userOrders = mockOrders.filter(order => order.userId === userId);

            if (userOrders.length === 0) {
                noOrdersMessage.classList.remove('hidden');
            } else {
                noOrdersMessage.classList.add('hidden');
                userOrders.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate)); 

                userOrders.forEach(order => {
                    const orderDiv = document.createElement('div');
                    orderDiv.className = 'order-list-item';

                    let itemsHtml = order.items.map(item => `
                        <p class="order-item-detail">
                            &bull; ${item.name} (Qty: ${item.quantity}) - ${formatCurrency(item.price * item.quantity)}
                        </p>
                    `).join('');

                    let statusClass = '';
                    let statusText = order.status || 'Pending';
                    
                    switch(statusText.toLowerCase()) {
                        case 'delivered': 
                            statusClass = 'inline-block px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold';
                            break;
                        case 'pending': 
                            statusClass = 'inline-block px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold';
                            break;
                        case 'shipped': 
                            statusClass = 'inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold';
                            break;
                        case 'cancelled':
                            statusClass = 'inline-block px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-semibold';
                            break;
                        default: 
                            statusClass = 'inline-block px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-sm font-semibold';
                    }

                    orderDiv.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                            <h3 style="margin: 0; font-weight: 600; color: #333;">Order ID: ${order.orderId}</h3>
                            <span class="${statusClass}">
                                <i class="fas fa-${getStatusIcon(statusText)}"></i> ${statusText}
                            </span>
                        </div>
                        <p style="margin: 8px 0; color: #666; font-size: 14px;">
                            <i class="fas fa-calendar"></i> Order Date: ${order.orderDate}
                        </p>
                        <p style="margin: 8px 0; color: #666; font-size: 14px;">
                            <i class="fas fa-credit-card"></i> Payment: ${order.paymentMethod || 'N/A'}
                        </p>
                        <p style="margin: 8px 0; color: #1976d2; font-weight: 600; font-size: 16px;">
                            <i class="fas fa-rupee-sign"></i> Total: ${formatCurrency(order.totalAmount)}
                        </p>
                        <div style="margin-left: 20px; margin-top: 12px; border-left: 2px solid #ddd; padding-left: 15px;">
                            <p style="margin: 8px 0; font-weight: 600; color: #333;">Items:</p>
                            ${itemsHtml}
                        </div>
                        <p style="margin: 12px 0; color: #999; font-size: 13px;">
                            <i class="fas fa-map-marker-alt"></i> Address: ${order.shippingAddress}
                        </p>
                    `;
                    ordersContainer.appendChild(orderDiv);
                });
            }
        };

        const getStatusIcon = (status) => {
            switch(status.toLowerCase()) {
                case 'delivered': return 'check-circle';
                case 'shipped': return 'truck';
                case 'pending': return 'hourglass-half';
                case 'cancelled': return 'times-circle';
                default: return 'info-circle';
            }
        };


        
        document.addEventListener('DOMContentLoaded', () => {
            renderCategoryFilters();
            filterProducts(); 
            updateCartCount(); 
            checkUserStatus(); 
            saveOrdersToLocalStorage(); 
        });

        searchInput.addEventListener('input', handleSearch); 
        searchInput.addEventListener('keyup', (event) => { if (event.key === 'Enter') handleSearch(); });
        searchButton.addEventListener('click', handleSearch);
        document.addEventListener('click', (event) => {
            if (searchSuggestions && searchInput && !searchSuggestions.contains(event.target) && event.target !== searchInput) {
                searchSuggestions.classList.add('hidden');
            }
        });
        
        cartButton.addEventListener('click', openCart);
        closeCartButton.addEventListener('click', closeCart);
        cartOverlay.addEventListener('click', closeCart);

        checkoutButton.addEventListener('click', () => {
            if (cart.length === 0) {
                showTemporaryMessage("Your cart is empty. Please add items before checking out.");
                closeCart(); 
            } else {
                // Save cart to localStorage before redirecting
                localStorage.setItem('cart', JSON.stringify(cart));
                // Redirect to checkout page
                window.location.href = 'checkout.html';
            }
        });

        productGrid.addEventListener('click', (event) => {
            if (event.target.closest('.btn-add-to-cart')) {
                return;
            }

            const productCard = event.target.closest('.prod-item');
            if (productCard) {
                const productId = parseInt(productCard.dataset.productId);
                const product = products.find(p => p.id === productId);
                if (product) {
                    showProductDetail(product); 
                }
            }
        });

        closeModalButton.addEventListener('click', hideProductDetail);
        productModalOverlay.addEventListener('click', hideProductDetail);

        paymentForm.addEventListener('submit', processPayment);
        backToCartBtn.addEventListener('click', hidePaymentSection); 

        
        const triggerAuthSection = (event) => {
            event.preventDefault(); 
            showAuthSection();
        };

        userAccountBtn.addEventListener('click', triggerAuthSection); 
        logoutButton.addEventListener('click', logoutUser); 
        loginTab.addEventListener('click', showLoginForm);
        signupTab.addEventListener('click', showSignupForm);
        continueAsGuestBtn.addEventListener('click', hideAuthSection); 

        
        closeOrderListModalBtn.addEventListener('click', hideOrderListModal);
        orderListModalOverlay.addEventListener('click', hideOrderListModal);

        const paymentMethodRadios = document.querySelectorAll('input[name="paymentMethod"]');
        const cardPaymentForm = document.getElementById('cardPaymentForm');
        const upiPaymentForm = document.getElementById('upiPaymentForm');
        const codPaymentForm = document.getElementById('codPaymentForm');
        const shippingAddressInput = document.getElementById('shippingAddress');
        const upiTransactionIdInput = document.getElementById('upiTransactionId');
        const codAmount = document.getElementById('codAmount');

        // Payment method selection handler
        paymentMethodRadios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                const method = e.target.value;
                cardPaymentForm.classList.toggle('hidden', method !== 'card');
                upiPaymentForm.classList.toggle('hidden', method !== 'upi');
                codPaymentForm.classList.toggle('hidden', method !== 'cod');

                // Set required attributes based on method
                document.getElementById('cardNumber').required = method === 'card';
                document.getElementById('cardName').required = method === 'card';
                document.getElementById('expiryDate').required = method === 'card';
                document.getElementById('cvv').required = method === 'card';
                document.getElementById('upiTransactionId').required = method === 'upi';
            });
        });

        const showPaymentSection = () => {
            productSection.classList.add('hidden'); 
            paymentSection.classList.remove('hidden');
            paymentSection.classList.add('open'); 
            
            authSection.classList.remove('open');
            authSection.classList.add('hidden');
            orderListModal.classList.remove('open'); 
            orderListModalOverlay.classList.add('hidden'); 

            document.body.classList.add('overflow-hidden'); 
            paymentForm.reset();

            // Update COD amount
            const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            codAmount.textContent = formatCurrency(totalAmount);

            // Pre-fill shipping address if user is logged in
            const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
            if (loggedInUser && loggedInUser.address) {
                shippingAddressInput.value = loggedInUser.address;
            }
        };

        const hidePaymentSection = () => {
            paymentSection.classList.remove('open');
            paymentSection.classList.add('hidden'); 
            productSection.classList.remove('hidden');
            document.body.classList.remove('overflow-hidden'); 
        };

        const showAuthSection = (initialTab = 'login') => {
            productSection.classList.add('hidden');
            authSection.classList.remove('hidden');
            paymentSection.classList.remove('open');
            paymentSection.classList.add('hidden'); 
            orderListModal.classList.remove('open'); 
            orderListModalOverlay.classList.add('hidden'); 

            authSection.classList.add('open');
            document.body.classList.add('overflow-hidden');

            if (initialTab === 'signup') {
                showSignupForm();
            } else {
                showLoginForm();
            }
        };

        const hideAuthSection = () => {
            authSection.classList.remove('open');
            authSection.classList.add('hidden');
            productSection.classList.remove('hidden');
            document.body.classList.remove('overflow-hidden');
        };

        const showMessage = (messageBox, message, type) => {
            messageBox.textContent = message;
            messageBox.className = `message-box ${type}`;
            messageBox.style.display = 'block';
            setTimeout(() => {
                messageBox.style.display = 'none';
            }, 3000); 
        };

        const showLoginForm = () => {
            loginTab.classList.add('active');
            signupTab.classList.remove('active');
            loginFormSection.classList.remove('hidden');
            signupFormSection.classList.add('hidden');
            loginMessageBox.style.display = 'none'; 
            signupMessageBox.style.display = 'none';
            loginForm.reset();
            signupForm.reset();
        };

        const showSignupForm = () => {
            signupTab.classList.add('active');
            loginTab.classList.remove('active');
            signupFormSection.classList.remove('hidden');
            loginFormSection.classList.add('hidden');
            loginMessageBox.style.display = 'none'; 
            signupMessageBox.style.display = 'none';
            loginForm.reset();
            signupForm.reset();
        };

        let mockUsers = JSON.parse(localStorage.getItem('mockUsers')) || [];
        let mockOrders = JSON.parse(localStorage.getItem('mockOrders')) || [];

        const saveUsersToLocalStorage = () => {
            localStorage.setItem('mockUsers', JSON.stringify(mockUsers));
        };

        const saveOrdersToLocalStorage = () => {
            localStorage.setItem('mockOrders', JSON.stringify(mockOrders));
        };

        signupForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            const username = signupUsernameInput.value.trim();
            const password = signupPasswordInput.value;
            const confirmPassword = confirmPasswordInput.value;
            const fullName = fullNameInput.value.trim();
            const phoneNumber = phoneNumberInput.value.trim();
            const address = addressInput.value.trim();

            if (!username || !password || !confirmPassword || !fullName || !phoneNumber || !address) {
                showMessage(signupMessageBox, "All fields are required.", "error");
                return;
            }

            if (password !== confirmPassword) {
                showMessage(signupMessageBox, "Passwords do not match.", "error");
                return;
            }

            if (mockUsers.some(user => user.username.toLowerCase() === username.toLowerCase())) {
                showMessage(signupMessageBox, "Username already exists. Please choose another.", "error");
                return;
            }

            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username, password, fullName, phoneNumber, address
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    showMessage(signupMessageBox, 'Account created successfully! Logging in...', 'success');
                    localStorage.setItem('authToken', data.token);
                    localStorage.setItem('loggedInUser', JSON.stringify(data.user));
                    
                    signupForm.reset();
                    setTimeout(() => {
                        hideAuthSection();
                        checkUserStatus();
                    }, 1500);
                } else {
                    showMessage(signupMessageBox, data.message || 'Registration failed', 'error');
                }
            } catch (error) {
                // Fallback to localStorage if backend is unavailable
                const newUser = {
                    username: username,
                    password: password,
                    fullName: fullName,
                    phoneNumber: phoneNumber,
                    address: address
                };
                mockUsers.push(newUser);
                saveUsersToLocalStorage();
                
                showMessage(signupMessageBox, "Account created successfully! Logging in...", "success");
                localStorage.setItem('loggedInUser', JSON.stringify(newUser));
                signupForm.reset();
                setTimeout(() => {
                    hideAuthSection();
                    checkUserStatus();
                }, 1500);
            }
        });

        loginForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            const username = loginUsernameInput.value.trim();
            const password = loginPasswordInput.value;

            if (!username || !password) {
                showMessage(loginMessageBox, "Please enter username/email and password.", "error");
                return;
            }

            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ username, password })
                });

                const data = await response.json();

                if (response.ok) {
                    showMessage(loginMessageBox, `Welcome, ${data.user.fullName}! Logging in...`, 'success');
                    localStorage.setItem('authToken', data.token);
                    localStorage.setItem('loggedInUser', JSON.stringify(data.user));

                    setTimeout(() => {
                        hideAuthSection();
                        checkUserStatus();
                    }, 1000);
                } else {
                    showMessage(loginMessageBox, data.message || 'Login failed', 'error');
                }
            } catch (error) {
                // Fallback to localStorage
                const user = mockUsers.find(u => u.username.toLowerCase() === username.toLowerCase());
                if (user && user.password === password) {
                    showMessage(loginMessageBox, `Welcome, ${user.fullName}! Logging in...`, 'success');
                    localStorage.setItem('loggedInUser', JSON.stringify(user));
                    
                    setTimeout(() => {
                        hideAuthSection();
                        checkUserStatus();
                    }, 1000);
                } else {
                    showMessage(loginMessageBox, "Invalid username/email or password.", "error");
                }
            }
        });

        const processPayment = async (event) => {
            event.preventDefault(); 

            if (cart.length === 0) {
                showTemporaryMessage("Your cart is empty. Cannot process payment.");
                hidePaymentSection();
                return;
            }

            const selectedMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
            const shippingAddress = shippingAddressInput.value.trim();

            if (!shippingAddress) {
                showTemporaryMessage("Please enter your shipping address.");
                return;
            }

            // Validate based on payment method
            if (selectedMethod === 'card') {
                const cardNumber = cardNumberInput.value.trim();
                const cardName = cardNameInput.value.trim();
                const expiryDate = expiryDateInput.value.trim();
                const cvv = cvvInput.value.trim();

                if (!cardNumber || !cardName || !expiryDate || !cvv) {
                    showTemporaryMessage("Please fill in all card details.");
                    return;
                }
            } else if (selectedMethod === 'upi') {
                const transactionId = upiTransactionIdInput.value.trim();
                if (!transactionId) {
                    showTemporaryMessage("Please enter your UPI transaction ID.");
                    return;
                }
            }

 

            const loggedInUser = JSON.parse(localStorage.getItem('loggedInUser'));
            const token = localStorage.getItem('authToken');

            if (!loggedInUser) {
                showTemporaryMessage("Please login to place an order.");
                return;
            }

            const newOrder = {
                orderId: `ORD-${Date.now()}`,
                userId: loggedInUser.username,
                orderDate: new Date().toLocaleDateString(),
                totalAmount: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                items: cart.map(item => ({
                    productId: item.id,
                    name: item.name,
                    quantity: item.quantity,
                    price: item.price
                })),
                status: 'Pending',
                paymentMethod: selectedMethod,
                shippingAddress: shippingAddress
            };

            try {
                if (token) {
                    const response = await fetch('/api/orders/create', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        },
                        body: JSON.stringify(newOrder)
                    });

                    if (response.ok) {
                        showTemporaryMessage(`Order placed successfully! Order ID: ${newOrder.orderId}`);
                        mockOrders.push(newOrder);
                        saveOrdersToLocalStorage();
                    } else {
                        throw new Error('API failed');
                    }
                } else {
                    throw new Error('No token');
                }
            } catch (error) {
                // Fallback to localStorage
                mockOrders.push(newOrder);
                saveOrdersToLocalStorage();
                showTemporaryMessage(`Order placed successfully! Order ID: ${newOrder.orderId}`);
            }

            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderCart();
            hidePaymentSection();
        };
    </script>
    <script>
document.getElementById("ordersLink").addEventListener("click", () => {
    window.location.href = "orders.html";
});
</script>
<button onclick="window.location.href='admin.html'" class="nav-link">
    <i class="fas fa-user-shield"></i> Admin Panel
</button>
...
<!-- your entire page content -->

<script>
    const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));
    
    const loginBtn = document.getElementById("loginBtn");
    const logoutBtn = document.getElementById("logoutBtn");

    if (loggedInUser) {
        loginBtn.style.display = "none";
        logoutBtn.style.display = "block";
    } else {
        loginBtn.style.display = "block";
        logoutBtn.style.display = "none";
    }
</script>

</body>
</html>
